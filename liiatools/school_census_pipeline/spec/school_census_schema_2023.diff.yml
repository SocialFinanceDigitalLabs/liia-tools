Autumn:
  column_map.pupilonroll.plaa:
    type: modify
    description: Update codes for 2022 schema
    value:
      &plaa
      category:
      - code: "N"
      - code: "A"
      - code: "G"
      - code: "R"
      - code: "C"
      - code: "O"
      canbeblank: yes
  column_map.schoolarrangedapdetailoffroll:
    type: add
    description: Adds new table for 2023 return
    value:
      schoolarrangedapdetailoffrolltableid:
        &alphanumeric-not-blank
        string: "alphanumeric"
        canbeblank: no
      NativeId:
        *alphanumeric-not-blank
      schoolarrangedapdetailoffrollorderseqcolumn:
        *alphanumeric-not-blank
      sourceid:
        *alphanumeric-not-blank
      pupilnolongeronrolltableid:
        *alphanumeric-not-blank
      urn:
        &int-blank
        numeric:
          type: "integer"
        canbeblank: yes
      ukprn:
        *int-blank
      entrydate:
        &date
        date: "%Y-%b-%d %H:%M:%S"
        canbeblank: yes
      leavingdate:
        *date
      apsessionsperweek:
        *int-blank
      apsettingtype:
        &ap-setting
        category:
          - code: "NFE"
          - code: "OOT"
          - code: "OTH"
          - code: "WBP"
        canbeblank: yes
      placementreason:
        &placement-reason
        category:
          - code: "BHS"
          - code: "SUS"
          - code: "EXR"
          - code: "MHN"
          - code: "OTH"
          - code: "PHN"
        canbeblank: yes
      senprovisionentry:
        &sen-provision
        category:
          - code: "N"
          - code: "E"
          - code: "K"
          - code: "S"
          - code: "A"
          - code: "P"
        canbeblank: yes
      senprovisionleaving:
        *sen-provision
      apattendancepattern:
        &attendance-pattern
        category:
          - code: "FT"
          - code: "PT"
        canbeblank: yes
  column_map.schoolarrangedapdetailonroll:
    type: add
    description: Adds new table for 2023 return
    value:
      schoolarrangedapdetailonrolltableid:
        *alphanumeric-not-blank
      NativeId:
        *alphanumeric-not-blank
      schoolarrangedapdetailonrollorderseqcolumn:
        *alphanumeric-not-blank
      sourceid:
        *alphanumeric-not-blank
      pupilonrolltableid:
        *alphanumeric-not-blank
      urn:
        *int-blank
      ukprn:
        *int-blank
      entrydate:
        *date
      leavingdate:
        *date
      apsessionsperweek:
        *int-blank
      apsettingtype:
        *ap-setting
      placementreason:
        *placement-reason
      senprovisionentry:
        *sen-provision
      senprovisionleaving:
        *sen-provision
      apattendancepattern:
        *attendance-pattern

Spring:
  column_map.pupilnolongeronroll:
    type: remove
    description: Remove column from pupilnolongeronroll
    value:
      - termlysessionscoronavirus
  column_map.pupilonroll:
    type: remove
    description: Remove column from pupilonroll
    value:
      - termlysessionscoronavirus
  column_map.pupilonroll.plaa:
    type: modify
    description: Update codes for 2022 schema
    value:
      *plaa
  column_map.pupilnolongeronroll.youngcarer:
    type: add
    description: Adds new table for 2022 return
    value:
      category:
      - code: "P"
        name: "Identified as a young carer by parent or guardian"
      - code: "S"
        name: "Identified as a young carer by school"
      - code: "N"
        name: "Not declared (default value)"
      canbeblank: yes
  column_map.schoolarrangedapdetailoffroll.applacementpostcode:
    type: add
    description: Adds new column for schoolarrangedapdetailoffroll
    value:
      &postcode-blank
      string: "postcode"
      canbeblank: yes
  column_map.schoolarrangedapdetailoffroll.companynumber:
    type: add
    description: Adds new column for schoolarrangedapdetailoffroll
    value:
      &company-number
      string: "regex"
      cell_regex:
        - ([A-Za-z]{2}|\d{2})\d{6}
      canbeblank: yes
  column_map.schoolarrangedapdetailonroll.applacementpostcode:
    type: add
    description: Adds new column for schoolarrangedapdetailonroll
    value:
      *postcode-blank
  column_map.schoolarrangedapdetailonroll.companynumber:
    type: add
    description: Adds new column for schoolarrangedapdetailonroll
    value:
      *company-number

Summer:
  column_map.pupilnolongeronroll:
    type: remove
    description: Remove column from pupilnolongeronroll
    value:
      - termlysessionscoronavirus
  column_map.pupilonroll:
    type: remove
    description: Remove column from pupilonroll
    value:
      - termlysessionscoronavirus
  column_map.pupilonroll.plaa:
    type: modify
    description: Update codes for 2022 schema
    value:
      *plaa
  column_map.schoolarrangedapdetailoffroll.applacementpostcode:
    type: add
    description: Adds new column for schoolarrangedapdetailoffroll
    value:
      *postcode-blank
  column_map.schoolarrangedapdetailoffroll.companynumber:
    type: add
    description: Adds new column for schoolarrangedapdetailoffroll
    value:
      *company-number
  column_map.schoolarrangedapdetailonroll.applacementpostcode:
    type: add
    description: Adds new column for schoolarrangedapdetailonroll
    value:
      *postcode-blank
  column_map.schoolarrangedapdetailonroll.companynumber:
    type: add
    description: Adds new column for schoolarrangedapdetailonroll
    value:
      *company-number